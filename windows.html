<!DOCTYPE html>

<html lang="en">
<meta charset="utf-8" />
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Rae's 483</title>
	<link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css">
	<script type="text/javascript" src="jquery-2.1.3.min.js"></script>
	<style type="text/css">
		body {
			cursor: default;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}
		#title {
			margin-top: 70px;
			margin-left: 50px;
			color: white;
			font-family: Verdana, Arial, sans-serif;
			font-size: 100px;
		}
		#overlay {
			visibility: hidden;
			position: fixed;
			left: 0px;
			top: 0px;
			width:100%;
			height:100%;
			text-align:center;
			z-index: 1000;
		}
		#overlaybutton {
			cursor: pointer;
			position: relative;
			bottom: -95px;
			left: 245px;
			margin: 0 auto;
			width: 40px;
			height: 40px;
			background-color: gray;
			overflow: auto;
			border: 3px solid white;
			text-align: center;
			color: white;
			font-family: Verdana, Arial, sans-serif;
			font-size: 30px;
		}
		#inneroverlay {
			position: relative;
			width:400px;
			height:400px;
			margin: 100px auto;
			border: 5px solid white;
			padding:15px;
			text-align:center;
		}
		.tile {
			cursor: pointer;
			width: 187px;
			float: left;
			position: relative;
			color: white;
			height: 187px;
			margin-bottom: 11px;
			margin-right: 11px;
		}
		.tile-text {
			position: absolute;
			font-family: Verdana, Arial, sans-serif;
			color: white;
			bottom: 6px;
			left: 12px;
		}
		.tile-icon {
			position: absolute;
			font-size: 120px;
			left: 0px;
			top: 30px;
			width: 100%;
			height: 100%;
			color: white;
			text-align: center;
			z-index: 1000;
		}
		.modal-icon {
			font-size: 270px;
			left: 0px;
			top: 65px;
			width: 100%;
			height: 100%;
			text-align: center;
			z-index: 1000;
		}
		.modal-text {
			position: absolute;
			font-size: 50px;
			bottom:12px;
			left:24px;
		}

		.red {
			background-color: #AF1A3F;
		}
		.green {
			background-color: #00A300;
		}
		.orange {
			background-color: #DA532C;
		}
		.magenta {
			background-color: deeppink;
		}
		.skyblue {
			background-color: #2672EC;
		}
		.blue {
			background-color: #094DB5;
		}
		.indigo {
			background-color: #613CBC;
		}
		.purple {
			background-color: #97009F;
		}

		.column {
			width: 396px;
		}

		@media (max-width: 550px) {
			body {
				background-color: black;
			}
			.tiles {
				width: 100%;
				margin: 70px auto auto 0px;
			}
			.column {
				margin: 0px auto;
			}
		}
		@media (min-width: 551px) {
			.tile.tile-large {
				width: 385px;
				margin-right: 0;
			}
			body {
				height:100%;
				width:5000px;
				margin:0;
				padding:0;
				background-image: url("bg.png");
			}
			.tiles {
				margin: 50px auto;
			}
			.column {
				float: left;
				margin-left: 56px;
			}
		}
		@media (max-width: 970px) {
			body {
				width: auto;
			}
			.column {
				float: none;
				margin: 0px auto;
			}
		}
	</style>
	
	<script type="text/javascript">
	
		var vis = false;
		var tiles = [];
		var nrows = 0;
		var words = ["sed", "unde", "omnis", "iste", "natus", "voluptatem",
		"totam", "rem", "aperiam", "eaque", "ipsa", "quae", "illo", "quasi",
		"beatae", "vitae", "dicta", "sunt", "explicabo", "nemo", "enim",
		"ipsam", "voluptatem", "quia", "voluptas", "sit", "aspernatur", "aut",
		"odit", "aut", "fugit", "consequuntur", "magni", "dolores", "eos",
		"qui", "ratione", "nesciunt", "neque", "porro", "quisquam", "est",
		"amet", "consectetur", "adipisci", "velit", "non", "numquam", "eius",
		"modi", "tempora", "incidunt", "ut", "labore", "et", "magnam", "aliquam",
		"quaerat", "enim", "ad", "minima", "veniam", "nostrum", "ullam",
		"corporis", "suscipit", "laboriosam", "nisi", "aliquid", "ex", "ea",
		"commodi", "vel", "iure", "quam", "nihil", "molestiae", "illum",
		"fugiat", "nulla", "pariatu"];

		var colorClasses = ["red", "green", "orange", "blue",
			"indigo", "magenta", "purple", "skyblue"];

		var iconClasses = ["fa fa-envelope", "fa fa-sun-o", "fa fa-headphones",
		"fa fa-play", "fa fa-shopping-cart", "fa fa-camera", "fa fa-google",
		"fa fa-trophy", "fa fa-file-text", "fa fa-file-picture-o",
		"fa fa-google-wallet", "fa fa-facebook", "fa fa-linkedin",
		"fa fa-pinterest-p", "fa fa-youtube", "fa fa-soundcloud",
		"fa fa-twitter", "fa fa-skype", "fa fa-github", "fa fa-dropbox",
		"fa fa-pied-piper", "fa fa-twitch", "fa fa-wechat",
		"fa fa-hacker-news", "fa fa-stumbleupon", "fa fa-tumblr",
		"fa fa-plane", "fa fa-print"];

		function generateWord() {
			var wordindex = Math.floor(Math.random()*words.length);
			return words[wordindex];
		}

		function generateIcon() {
			var iconindex = Math.floor(Math.random()*iconClasses.length);
			return iconClasses[iconindex];
		}

		function generateSmallTile() {
			var colorindex = Math.floor(Math.random()*(colorClasses.length));

			var tileText = document.createElement("span");
			tileText.className = "tile-text";
			tileText.innerText = generateWord();
			 
			var tileIcon = document.createElement("span");
			tileIcon.className = generateIcon() + " tile-icon";

			var newTile = document.createElement("article");
			newTile.className = "tile " + colorClasses[colorindex];
			newTile.appendChild(tileIcon);
			newTile.appendChild(tileText);

			var num = tiles.length;
			newTile.id = num.toString();
			console.log(newTile.id);

			return {
					'tile': newTile,
					'color': colorClasses[colorindex],
					'large': false,
					'text' : tileText,
					'icon' : tileIcon
					};
		}

		function generateLargeTile() {
			var colorindex = Math.floor(Math.random()*(colorClasses.length));

			var tileText = document.createElement("span");
			tileText.className = "tile-text";
			tileText.innerText = generateWord();

			var tileIcon = document.createElement("span");
			tileIcon.className = generateIcon() + " tile-icon";
			/*
			var icon = generateIcon();
			tileIcon.className = icon + " tile-icon";
			*/

			var newTile = document.createElement("article");
			newTile.className = "tile tile-large " + colorClasses[colorindex];
			newTile.appendChild(tileIcon);
			newTile.appendChild(tileText);

			var num = tiles.length;
			newTile.id = num.toString();
			console.log(newTile.id);

			return {
					'tile': newTile,
					'color': colorClasses[colorindex],
					'large': true,
					'text' : tileText,
					'icon' : tileIcon
					};
		}

		function generateTiles() {
			// Get a random number between 34 and 64 for number of tiles
			var numtiles = Math.floor(Math.random()*(64-34+1)) + 34;
		
			while (tiles.length < numtiles) {
				// Get a color
				var colorindex = Math.floor(Math.random()*colorClasses.length);
				// Need a 1 in 7 chance of getting a long box.
				var longbox = Math.random() < 0.2;
		
				// Only make a long box if screen is at least 480.
				if (screen.width > 480 && longbox) {
					tiles.push(generateLargeTile());
					nrows+=1;
				}
				else {
					// Make two small tiles to fill a row or 1 if it's the last
					// box
					tiles.push(generateSmallTile());
					if (tiles.length < numtiles) {
						// Make second box in row. Need another color
						tiles.push(generateSmallTile());
					}
					nrows+=1;
				}
			}
		}

		function distributeTiles1Col() {
				console.log("One");
				// Put them all in a single column
				tileSpread = document.getElementById("tile-spread");
				var col = document.createElement("section");
				col.className = "column";
				for (var i = 0; i < tiles.length; i++) {
					if (tiles[i].large == true && window.innerWidth <= 480) {
						var smallTile = document.createElement("article");
						smallTile.className = "tile " + tiles[i].color;
						smallTile.appendChild(tiles[i].text.cloneNode(true));
						smallTile.appendChild(tiles[i].icon.cloneNode(true));
						console.log(smallTile);
						col.appendChild(smallTile);
					}
					else {
						col.appendChild(tiles[i].tile);
					}
				}
				tileSpread.appendChild(col);
		}
	
		function distributeTilesMultiCol() {
				var i = 0;
				tileSpread = document.getElementById("tile-spread");

				while (i < tiles.length) {
					var col = document.createElement("section");
					col.className = "column";
					for (var row = 0; (row < 4 && i < tiles.length); row++) {
						if (tiles[i].large == true) {
							col.appendChild(tiles[i].tile);
							i++;
						}
						else {
							col.appendChild(tiles[i].tile);
							i++;
							if (i < tiles.length) {
								col.appendChild(tiles[i].tile);
								i++;
							}
						}
					}
					tileSpread.appendChild(col);
				}
		}

		function distributeTiles() {
			console.log(tiles.length);
			console.log(window.innerWidth);
			if (window.innerWidth < 960) {
				distributeTiles1Col();
			}
			else {
				distributeTilesMultiCol();
			}
		}
		
		function clearTiles() {
			tileSpread = document.getElementById("tile-spread");
			while (tileSpread.firstChild) {
				console.log("Removing child");
				tileSpread.removeChild(tileSpread.firstChild);
			}
		}

		function overlay(tile) {
			bu = document.getElementById("overlaybutton");
			el = document.getElementById("overlay");
			eld = document.getElementById("inneroverlay");
			var index = parseInt(tile.id, 10);

			eld.className = tiles[index].color;
			var icon = document.createElement("span");
			icon.className = tiles[index].icon.className + " modal-icon";
			eld.appendChild(icon);

			var txt = document.createElement("div");
			txt.className = "tile-text modal-text";
			txt.innerText = tiles[index].text.innerText;
			eld.appendChild(txt);

			console.log(tiles[index].color);
			el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
			vis = (el.style.visability == "visible") ? false : true; 
			console.log(vis);
		}
	
		// Initial loading of page
		$(document).ready(function() {
					console.log("Document ready");
					generateTiles();
					distributeTiles();

					// Redistribute tiles when window is resized
					$(window).resize(function() {
								console.log("Resizing");
								clearTiles();
								distributeTiles();
							});

					$('.tile').on('click', function (e) {
							overlay(e.target.parentElement);
							});

					$('#overlaybutton').on('click', function (e) {
							el = document.getElementById("overlay");
							el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
							eld = document.getElementById("inneroverlay");
							while(eld.firstChild) {
								eld.removeChild(eld.firstChild);
							}
							vis = false;
							});


				});

	
	</script>
		
</head>
<body>
<div id="title"`>
	<span>Rae Marks</span>
</div>
<div>
	<section id="tile-spread" class="tiles"></section>
</div>
<div id="overlay">
	<div id="overlaybutton"><div>X</div></div>
	<div id="inneroverlay"></div>
</div>
</body>
</html>
